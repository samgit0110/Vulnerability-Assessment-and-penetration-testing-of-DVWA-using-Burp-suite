from PIL import Image
import pyheif
import os 
def convert_heic_to_jpg(heic_file_path, jpg_file_path):
    # Open HEIC file using pyheif
    heif_file = pyheif.read(heic_file_path)

    # Convert the HEIC image to a PIL Image
    pil_image = Image.frombytes(
        heif_file.mode,
        heif_file.size,
        heif_file.data,
        "raw",
        heif_file.mode,
        heif_file.stride,
    )

    # Save the image as a JPG file
    pil_image.save(jpg_file_path, "JPEG")
    print(f"Converted {heic_file_path} to {jpg_file_path}")

# Example usage:
jpg_cnt=0
heic_file=os.listdir("/home/shuhari/photos")
for file in heic_file:
	if file.endswith(".HEIC"):
		convert_heic_to_jpg("/home/shuhari/photos/"+file, "/home/shuhari/photos_jpj/img"+str(jpg_cnt)+".jpg")
		jpg_cnt+=1
	else:
		pass
#heic_file = "/home/shuhari/photos/IMG_0001.HEIC"
#jpg_file = "/home/shuhari/photos_jpj/IMG_0001.jpg"

